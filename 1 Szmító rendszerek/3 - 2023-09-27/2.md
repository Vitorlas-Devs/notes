# Hozzáférési jogosultságok

## Unix rendszerek jogosultságai

A fájl engedélyrendszer egy 3 jegyű nyolcas (octal) számot használ egy fájl vagy könyvtár engedélyeinek reprezentálására. Minden számjegy más engedélykészletet reprezentál:

1. számjegy: a fájl tulajdonosának engedélyei
2. számjegy: a fájlhoz tartozó csoport engedélyei
3. számjegy: mindenki más engedélyei

Minden számjegy egy három bitből álló kombináció, ahol:

1. bit: olvasási engedély
2. bit: írási engedély
3. bit: végrehajtási engedély

A bit értékei:

- 4: olvasási engedély
- 2: írási engedély
- 1: végrehajtási engedély

Az engedélyek oktális értékének kiszámításához egyszerűen össze kell adni a bit értékeit az engedélykészletekhez.

**Például:**

- Ha a tulajdonos olvasási és írási engedéllyel rendelkezik (4 + 2 = 6), az első számjegy 6 lenne.
- Ha a csoport olvasási és végrehajtási engedéllyel rendelkezik (4 + 1 = 5), a második számjegy 5 lenne.
- Ha mindenki másnak nincs engedélye (0), a harmadik számjegy 0 lenne.

**Tehát például, ha egy fájl engedélyei 644 (alapértelmezett), az azt jelenti:**

- A tulajdonos olvasási és írási engedéllyel rendelkezik (6)
- A csoport olvasási engedéllyel rendelkezik (4)
- Mindenki más olvasási engedéllyel rendelkezik (4)

Az umask azon jogok összege, amelyeket a rendszer nem engedélyez. Például, ha az umask 022, akkor a rendszer nem engedélyezi a csoport és a többi felhasználó írási és végrehajtási jogát. Az umask értéke alapértelmezés szerint 022, de a felhasználók megváltoztathatják az umask értékét a .bashrc fájlban.

**Példa jogosultságok megtekintésére a parancssorban:**

```bash
$ ls -l
total 0
-rw-r--r-- 1 user user 0 Sep 27 10:00 file.txt
```

Itt a `rw-r--r--` rész a jogosultságokat jelenti.

- `rw-` a tulajdonos jogosultságai: olvasás és írás
- `r--` a csoport jogosultságai: olvasás
- `r--` mindenki más jogosultságai: olvasás

**Példa jogosultságok szerkesztésére a parancssorban:**

```bash
$ chmod 777 file.txt
$ ls -l
total 0
-rwxrwxrwx 1 user user 0 Sep 27 10:00 file.txt
```

Itt a `777` az összes jogosultságot jelenti.

- `7` a tulajdonos jogosultságai: olvasás, írás és végrehajtás
- `7` a csoport jogosultságai: olvasás, írás és végrehajtás
- `7` mindenki más jogosultságai: olvasás, írás és végrehajtás

## ACL (Access Control List)

Az ACL egy olyan rendszer, amely lehetővé teszi a felhasználók számára, hogy a fájlokhoz és könyvtárakhoz hozzáférési jogosultságokat rendeljenek hozzá. Az ACL-eket a fájlrendszeren kívül tárolják, és a fájlrendszeren keresztül érhetők el. Az ACL-eket például a Windows rendszerek is használják.

### Parancsok: `getfacl` és `setfacl`

A `getfacl` parancs segítségével tudjuk lekérdezni az ACL-eket, míg a `setfacl` parancs segítségével tudunk ACL-eket létrehozni, módosítani és törölni.

**Példa ACL létrehozására:**

```bash
$ setfacl -m u:user:rwx file.txt
$ getfacl file.txt
# file: file.txt
# owner: user
# group: user
user::rwx
user:user:rwx
group::r--
mask::rwx
other::r--
```

- a `u:user:rwx` rész a jogosultságokat jelenti: a `user` felhasználó számára `rwx` (read, write, execute) jogosultságokat adtunk meg a `file.txt` fájlhoz
- a `getfacl` paranccsal tudjuk lekérdezni az ACL-eket
- az ezutáni sorok a többi jogosultságot jelentik
- a `mask` rész a maszkot jelenti, ami az umask értékétől függ, ezek azok a jogosultságok, amelyeket a rendszer kizár a többi felhasználó számára
- az `other` rész a többi felhasználó jogosultságait jelenti (akik nem a tulajdonosok és nem a csoport tagjai)
